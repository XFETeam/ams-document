(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{254:function(t,a,s){"use strict";s.r(a);var n=s(28),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"组件-actionref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件-actionref"}},[t._v("#")]),t._v(" 组件 ActionRef")]),t._v(" "),s("p",[t._v("由于有部分组件通过 "),s("code",[t._v("react ref")]),t._v(" (ref: 引用) 的方式进行 "),s("code",[t._v("内部组件 actions")]),t._v(" 的暴露, AMS 利用这样的机制提供了一个\n参数 "),s("code",[t._v("actionRef")]),t._v(" 该部分提供了 "),s("code",[t._v("react ref")]),t._v(" 的组件进行再次暴露处理, 当使用 "),s("code",[t._v("actionRef")]),t._v(" 后开发者可以\n使用该组件暴露的所有 "),s("code",[t._v("ref")]),t._v(" 属性.")]),t._v(" "),s("p",[t._v("留意例子中的 "),s("code",[t._v("actionRef: true")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  $$$"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'component'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  registryName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  componentName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Form'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  actionRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Form-c1a56ccb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    labelCol"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("span"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    wrapperCol"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("span"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    onFinish"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      $$$"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      registryName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ams'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      functionName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$$$0'")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[t._v("当标记了 "),s("code",[t._v("actionRef: true")]),t._v(" 后, 开发者可以使用如下 "),s("a",{attrs:{href:"https://ant.design/components/form-cn/#FormInstance",target:"_blank",rel:"noopener noreferrer"}},[t._v("actions"),s("OutboundLink")],1),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("getFieldValue")]),t._v(" "),s("td",[t._v("获取对应字段名的值")]),t._v(" "),s("td",[t._v("(name: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v(") => any")])]),t._v(" "),s("tr",[s("td",[t._v("getFieldsValue")]),t._v(" "),s("td",[t._v("获取一组字段名对应的值，会按照对应结构返回")]),t._v(" "),s("td",[t._v("(nameList?: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v("[], filterFunc?: (meta: { touched: boolean, validating: boolean }) => boolean) => any")])]),t._v(" "),s("tr",[s("td",[t._v("getFieldError")]),t._v(" "),s("td",[t._v("获取对应字段名的错误信息")]),t._v(" "),s("td",[t._v("(name: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v(") => string[]")])]),t._v(" "),s("tr",[s("td",[t._v("getFieldsError")]),t._v(" "),s("td",[t._v("获取一组字段名对应的错误信息，返回为数组形式")]),t._v(" "),s("td",[t._v("(nameList?: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v("[]) => FieldError[]")])]),t._v(" "),s("tr",[s("td",[t._v("isFieldTouched")]),t._v(" "),s("td",[t._v("检查对应字段是否被用户操作过")]),t._v(" "),s("td",[t._v("(name: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v(") => boolean")])]),t._v(" "),s("tr",[s("td",[t._v("isFieldsTouched")]),t._v(" "),s("td",[t._v("检查一组字段是否被用户操作过，"),s("code",[t._v("allTouched")]),t._v(" 为 "),s("code",[t._v("true")]),t._v(" 时检查是否所有字段都被操作过")]),t._v(" "),s("td",[t._v("(nameList?: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v("[], allTouched?: boolean) => boolean")])]),t._v(" "),s("tr",[s("td",[t._v("isFieldValidating")]),t._v(" "),s("td",[t._v("检查一组字段是否正在校验")]),t._v(" "),s("td",[t._v("(name: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v(") => boolean")])]),t._v(" "),s("tr",[s("td",[t._v("resetFields")]),t._v(" "),s("td",[t._v("重置一组字段到 "),s("code",[t._v("initialValues")])]),t._v(" "),s("td",[t._v("(fields?: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v("[]) => void")])]),t._v(" "),s("tr",[s("td",[t._v("scrollToField")]),t._v(" "),s("td",[t._v("滚动到对应字段位置")]),t._v(" "),s("td",[t._v("(name: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v(", options: ["),s("a",{attrs:{href:"https://github.com/stipsan/scroll-into-view-if-needed/blob/ece40bd9143f48caf4b99503425ecb16b0ad8249/src/types.ts#L10",target:"_blank",rel:"noopener noreferrer"}},[t._v("ScrollOptions"),s("OutboundLink")],1),t._v("]) => void")])]),t._v(" "),s("tr",[s("td",[t._v("setFields")]),t._v(" "),s("td",[t._v("设置一组字段状态")]),t._v(" "),s("td",[t._v("(fields: "),s("a",{attrs:{href:"#FieldData"}},[t._v("FieldData")]),t._v("[]) => void")])]),t._v(" "),s("tr",[s("td",[t._v("setFieldsValue")]),t._v(" "),s("td",[t._v("设置表单的值")]),t._v(" "),s("td",[t._v("(values) => void")])]),t._v(" "),s("tr",[s("td",[t._v("submit")]),t._v(" "),s("td",[t._v("提交表单，与点击 "),s("code",[t._v("submit")]),t._v(" 按钮效果相同")]),t._v(" "),s("td",[t._v("() => void")])]),t._v(" "),s("tr",[s("td",[t._v("validateFields")]),t._v(" "),s("td",[t._v("触发表单验证")]),t._v(" "),s("td",[t._v("(nameList?: "),s("a",{attrs:{href:"#NamePath"}},[t._v("NamePath")]),t._v("[]) => Promise")])])])]),t._v(" "),s("h2",{attrs:{id:"actionref-调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actionref-调用"}},[t._v("#")]),t._v(" ActionRef 调用")]),t._v(" "),s("p",[t._v("沿用上面 Form 的例子, 当我们需要提交表单时, 我们可以通过下面方式对 "),s("code",[t._v("antd Form")]),t._v(" key 为 "),s("code",[t._v("Form-c1a56ccb")]),t._v(" 为进行调用:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  $$$"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'component'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  registryName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  componentName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Button'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      $$$"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      registryName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ams'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      functionName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'triggerAction'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Form-c1a56ccb'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'submit'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[s("strong",[t._v("注: triggerAction 将在后续章节详细说明")])]),t._v(" "),s("h2",{attrs:{id:"常见需设置-actionref-组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见需设置-actionref-组件"}},[t._v("#")]),t._v(" 常见需设置 actionRef 组件")]),t._v(" "),s("ul",[s("li",[t._v("antd Form")]),t._v(" "),s("li",[t._v("ams ProTable")])])])}),[],!1,null,null,null);a.default=e.exports}}]);